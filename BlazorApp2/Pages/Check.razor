@page "/Check"
@using System.Security.Claims
@using BlazorApp2.Auth
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.Authorization
@inject HttpClient Http
@attribute [Authorize]
@inject AuthenticationStateProvider AuthProvider
<PageTitle>CheckAuth</PageTitle>

<h1>Authorized</h1><br/><br/>
<h1>USERNAME: @UserName</h1>



@code {
    private string UserName { get; set; }
    

    protected override async Task OnInitializedAsync()
    {
        var auth = (CustomAuth)AuthProvider;
        var user = await auth.GetAuthenticationStateAsync();
        UserName = user.User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Name)!.Value;
    }



}